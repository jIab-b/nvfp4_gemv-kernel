## 11.7. Cluster Dimension Directives 

The following directives specify information about clusters:

* `.reqnctapercluster`
* `.explicitcluster`
* `.maxclusterrank`

The `.reqnctapercluster` directive specifies the number of CTAs in the cluster. The
`.explicitcluster` directive specifies that the kernel should be launched with explicit cluster
details. The `.maxclusterrank` directive specifies the maximum number of CTAs in the cluster.

The cluster dimension directives can be applied only on kernel functions.

### 11.7.1. [Cluster Dimension Directives: `.reqnctapercluster`](#cluster-dimension-directives-reqnctapercluster)[](#cluster-dimension-directives-reqnctapercluster "Permalink to this headline")

`.reqnctapercluster`

Declare the number of CTAs in the cluster.

Syntax

```
.reqnctapercluster nx

.reqnctapercluster nx, ny

.reqnctapercluster nx, ny, nz
```

Description

Set the number of thread blocks (CTAs) in the cluster by specifying the extent of each dimension of
the 1D, 2D, or 3D cluster. The total number of CTAs is the product of the number of CTAs in each
dimension. For kernels with `.reqnctapercluster` directive specified, runtime will use the
specified values for configuring the launch if the same are not specified at launch time.

Semantics

If cluster dimension is explicitly specified at launch time, it should be equal to the values
specified in this directive. Specifying a different cluster dimension at launch will result in a
runtime error or kernel launch failure.

PTX ISA Notes

Introduced in PTX ISA version 7.8.

Target ISA Notes

Requires `sm_90` or higher.

Examples

```
.entry foo .reqnctapercluster 2         { . . . }

.entry bar .reqnctapercluster 2, 2, 1   { . . . }

.entry ker .reqnctapercluster 3, 2      { . . . }
```

### 11.7.2. [Cluster Dimension Directives: `.explicitcluster`](#cluster-dimension-directives-explicitcluster)[](#cluster-dimension-directives-explicitcluster "Permalink to this headline")

`.explicitcluster`

Declare that Kernel must be launched with cluster dimensions explicitly specified.

Syntax

```
.explicitcluster
```

Description

Declares that this Kernel should be launched with cluster dimension explicitly specified.

Semantics

Kernels with `.explicitcluster` directive must be launched with cluster dimension explicitly
specified (either at launch time or via `.reqnctapercluster`), otherwise program will fail with
runtime error or kernel launch failure.

PTX ISA Notes

Introduced in PTX ISA version 7.8.

Target ISA Notes

Requires `sm_90` or higher.

Examples

```
.entry foo .explicitcluster         { . . . }
```

### 11.7.3. [Cluster Dimension Directives: `.maxclusterrank`](#cluster-dimension-directives-maxclusterrank)[](#cluster-dimension-directives-maxclusterrank "Permalink to this headline")

`.maxclusterrank`

Declare the maximum number of CTAs that can be part of the cluster.

Syntax

```
.maxclusterrank n
```

Description

Declare the maximum number of thread blocks (CTAs) allowed to be part of the cluster.

Semantics

Product of the number of CTAs in each cluster dimension specified in any invocation of the kernel is
required to be less or equal to that specified in this directive. Otherwise invocation will result
in a runtime error or kernel launch failure.

The `.maxclusterrank` directive cannot be used in conjunction with the `.reqnctapercluster` directive.

PTX ISA Notes

Introduced in PTX ISA version 7.8.

Target ISA Notes

Requires `sm_90` or higher.

Examples

```
.entry foo ..maxclusterrank 8         { . . . }
```